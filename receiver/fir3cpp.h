#ifndef FIR3CPP_H
#define FIR3CPP_H



#define FIR_FILTER_BUFFER_SIZE 1024
#define DECIMATION_FACTOR_3 10
#define FILTER_SIZE_3 71

#include "decoder.h"

class fir_filter3 {    


  private:
/*  https://fiiir.com  s=9000, c=250, Tb = 380, Kaiser SA=50dB   */
   double filter_h[FILTER_SIZE_3] = {
    -0.000087345817796987,
    -0.000232195132266332,
    -0.000442076243951628,
    -0.000720924265915319,
    -0.001067908468615529,
    -0.001476375993268025,
    -0.001932999827315015,
    -0.002417215401571998,
    -0.002901020606720850,
    -0.003349198591501326,
    -0.003720001963972006,
    -0.003966311939266427,
    -0.004037257890229464,
    -0.003880253278472523,
    -0.003443374885417331,
    -0.002677985521216987,
    -0.001541477884664715,
    0.000000000000000001,
    0.001968985676270040,
    0.004374459416084596,
    0.007210060047034713,
    0.010452885221333860,
    0.014062977433332844,
    0.017983565573922684,
    0.022142094715976755,
    0.026452036228794381,
    0.030815428491831172,
    0.035126057839239597,
    0.039273152337001994,
    0.043145429840315365,
    0.046635318467100652,
    0.049643153691178457,
    0.052081152709010807,
    0.053876973964790471,
    0.054976687488825469,
    0.055347009140237373,
    0.054976687488825469,
    0.053876973964790471,
    0.052081152709010807,
    0.049643153691178457,
    0.046635318467100652,
    0.043145429840315365,
    0.039273152337001994,
    0.035126057839239569,
    0.030815428491831172,
    0.026452036228794357,
    0.022142094715976755,
    0.017983565573922684,
    0.014062977433332844,
    0.010452885221333868,
    0.007210060047034713,
    0.004374459416084599,
    0.001968985676270040,
    0.000000000000000001,
    -0.001541477884664715,
    -0.002677985521216987,
    -0.003443374885417330,
    -0.003880253278472523,
    -0.004037257890229464,
    -0.003966311939266427,
    -0.003720001963972006,
    -0.003349198591501326,
    -0.002901020606720850,
    -0.002417215401571998,
    -0.001932999827315015,
    -0.001476375993268025,
    -0.001067908468615529,
    -0.000720924265915318,
    -0.000442076243951628,
    -0.000232195132266332,
    -0.000087345817796987
   };
        double buffer_I[FIR_FILTER_BUFFER_SIZE];
        double buffer_Q[FIR_FILTER_BUFFER_SIZE];
        int buffer_ptr;
        int decimation_count;
      
        decoder * output_dec; 


  public:         
    fir_filter3(decoder * dec);
    void sample_in (double sample_I,double sample_Q);
};

#endif
